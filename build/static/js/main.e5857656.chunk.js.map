{"version":3,"sources":["images/header-logo.svg","components/Navigation/Navigation.jsx","components/Header/Header.jsx","components/Promo/Promo.jsx","components/NavTab/NavTab.jsx","components/AboutProject/AboutProject.jsx","components/Techs/Techs.jsx","images/photo-me.jpg","components/AboutMe/AboutMe.jsx","components/Portfolio/Portfolio.jsx","components/Footer/Footer.jsx","components/Main/Main.jsx","hooks/useForm.js","components/SearchForm/SearchForm.jsx","components/FilterCheckbox/FilterCheckbox.jsx","components/Preloader/Preloader.jsx","utils/throttle.js","components/MoviesCardList/MoviesCardList.jsx","utils/constants.js","components/MoviesCard/MoviesCard.jsx","components/Movies/Movies.jsx","components/SavedMovies/SavedMovies.jsx","components/Register/Register.jsx","components/Login/Login.jsx","contexts/CurrentUserContext.js","components/Profile/Profile.jsx","components/NotFound/NotFound.jsx","utils/MoviesApi.js","utils/MainApi.js","utils/auth.js","components/ProtectedRoute/ProtectedRoute.jsx","components/App/App.jsx","reportWebVitals.js","index.jsx"],"names":["Navigation","useState","isMenuOpen","setMenuOpen","className","exact","to","activeClassName","type","onClick","Header","loggedIn","isMain","useRouteMatch","path","src","logo","alt","Promo","NavTab","children","defaultProps","undefined","AboutProject","React","forwardRef","props","ref","Techs","AboutMe","href","target","rel","photoMe","Portfolio","Footer","Date","getFullYear","Main","createRef","current","scrollIntoView","behavior","useFormWithValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","input","value","name","validationMessage","closest","checkValidity","SearchForm","findMovies","isLoading","error","setError","title","onSubmit","e","preventDefault","movie","onChange","id","maxLength","placeholder","disabled","FilterCheckbox","filtered","handleCheck","Preloader","throttle","func","delay","timeout","args","setTimeout","call","MoviesCardList","moviesCards","messages","cardsCount","setCardsCount","window","innerWidth","windowWidth","setWindowWidth","useEffect","callback","addEventListener","removeEventListener","searchForm","slice","length","reqOptions","baseUrl","url","beatfilmUrl","headers","Accept","MoviesCard","country","director","duration","year","description","image","trailerLink","trailer","nameRU","nameEN","onCardLike","onCardDelete","isLiked","isSavedMovies","isMovies","n","Movies","movies","likedMovies","setFiltered","data","filter","map","card","includes","SavedMovies","movieId","reverse","Register","handleRegister","isSending","password","email","pattern","minLength","required","autoComplete","regForm","Login","handleLogin","authForm","CurrentUserContext","createContext","Profile","handleLogout","onUpdateUser","currentUser","useContext","profileForm","NotFound","history","useHistory","go","push","MoviesApi","options","_parseResponse","res","ok","json","Promise","reject","Error","status","this","_url","_headers","fetch","then","MainApi","credentials","method","body","JSON","stringify","thumbnail","formats","auth","_checkResponse","response","register","logout","ProtectedRoute","Component","component","App","setCurrentUser","setIsLoading","setMessages","setMovies","isFormSending","setIsFormSending","setLoggedIn","savedMovies","setSavedMovies","location","useLocation","resetMessages","localMovies","parse","localStorage","getItem","getSavedMovies","usersMovies","setItem","catch","err","console","log","message","getUserInfo","user","pathname","removeItem","handleDelete","userMovie","find","i","deleteMovie","_id","state","c","newSavedMovies","Provider","getMovies","foundMovies","toLowerCase","finally","saveMovie","savedMovie","foundSavedMovies","authorize","userData","setUserInfo","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e5857656.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header-logo.3406903e.svg\";","import React, { useState } from 'react';\r\nimport { NavLink, Link } from 'react-router-dom';\r\nimport './Navigation.css';\r\n\r\nfunction Navigation() {\r\n  const [isMenuOpen, setMenuOpen] = useState(false);\r\n\r\n  function toggleMenu() {\r\n    setMenuOpen(!isMenuOpen);\r\n  }\r\n\r\n  return (\r\n    <nav className=\"navigation\">\r\n      <div className={`navigation__menu ${isMenuOpen ? 'navigation_menu-open' : ''}`}>\r\n        <div className=\"navigation__container\">\r\n          <NavLink\r\n            exact\r\n            to=\".\"\r\n            className=\"navigation__link navigation__link_hidden\"\r\n            activeClassName=\"navigation__link_selected\"\r\n          >\r\n            Главная\r\n          </NavLink>\r\n          <NavLink\r\n            to=\"movies\"\r\n            className=\"navigation__link\"\r\n            activeClassName=\"navigation__link_selected\"\r\n          >\r\n            Фильмы\r\n          </NavLink>\r\n          <NavLink\r\n            to=\"saved-movies\"\r\n            className=\"navigation__link\"\r\n            activeClassName=\"navigation__link_selected\"\r\n          >\r\n            Сохраненные фильмы\r\n          </NavLink>\r\n        </div>\r\n        <Link\r\n          to=\"profile\"\r\n          className=\"navigation__account-link\"\r\n        >\r\n          Аккаунт\r\n        </Link>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        onClick={toggleMenu}\r\n        aria-label=\"toggleMenu\"\r\n        className={`navigation__button ${isMenuOpen ? 'navigation__button_type_close' : ''}`}\r\n      />\r\n\r\n      <div className={`navigation__fade ${isMenuOpen ? 'navigation_menu-open' : ''}`} />\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navigation;\r\n","import React from 'react';\r\nimport './Header.css';\r\nimport { Link, useRouteMatch } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport logo from '../../images/header-logo.svg';\r\nimport Navigation from '../Navigation/Navigation';\r\n\r\nfunction Header({ loggedIn }) {\r\n  const isMain = useRouteMatch({ path: '/', exact: true });\r\n\r\n  return (\r\n    <>\r\n      { isMain && !loggedIn ? (\r\n        <div className=\"header__wrapper header__wrapper_page_landing\">\r\n          <header className=\"header\">\r\n            <Link to=\".\" className=\"header__link\">\r\n              <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\r\n            </Link>\r\n            <nav className=\"header__container\">\r\n              <Link to=\"signup\" className=\"header__link header__register-link\">Регистрация</Link>\r\n              <Link to=\"signin\" className=\"header__login-link\">Войти</Link>\r\n            </nav>\r\n          </header>\r\n        </div>\r\n      ) : (\r\n        <div className={`header__wrapper ${isMain ? 'header__wrapper_page_landing' : 'header__wrapper_page_main'}`}>\r\n          <header className=\"header\">\r\n            <Link to=\".\" className=\"header__link\">\r\n              <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\r\n            </Link>\r\n            <Navigation />\r\n          </header>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nHeader.propTypes = {\r\n  loggedIn: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport './Promo.css';\r\n\r\nfunction Promo() {\r\n  return (\r\n    <div className=\"promo__wrapper\">\r\n      <section className=\"promo\">\r\n        <div className=\"promo__container\">\r\n          <h1 className=\"promo__title\">Учебный проект студентки факультета Веб‑разработки.</h1>\r\n          <p className=\"promo__description\">Листайте ниже, чтобы узнать больше про этот проект и его создательницу.</p>\r\n        </div>\r\n        <div className=\"promo__logo\" />\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Promo;\r\n","import React from 'react';\r\nimport './NavTab.css';\r\nimport PropTypes from 'prop-types';\r\n\r\nfunction NavTab({ children }) {\r\n  return (\r\n    <div className=\"nav-tab__wrapper\">\r\n      <section className=\"nav-tab\">\r\n        {children}\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nNavTab.propTypes = {\r\n  children: PropTypes.node,\r\n};\r\n\r\nNavTab.defaultProps = {\r\n  children: undefined,\r\n};\r\n\r\nexport default NavTab;\r\n","import React from 'react';\r\nimport './AboutProject.css';\r\n\r\nconst AboutProject = React.forwardRef((props, ref) => (\r\n  <>\r\n    <section className=\"about-project\" ref={ref}>\r\n      <h2 className=\"about-project__title\">О проекте</h2>\r\n      <div className=\"about-project__wrapper\">\r\n        <div>\r\n          <h3 className=\"about-project__subtitle\">Дипломный проект включал 5 этапов</h3>\r\n          <p className=\"about-project__description\">Составление плана, работу над бэкендом, вёрстку, добавление функциональности и финальные доработки.</p>\r\n        </div>\r\n        <div>\r\n          <h3 className=\"about-project__subtitle\">На выполнение диплома ушло 5 недель</h3>\r\n          <p className=\"about-project__description\">У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать, чтобы успешно защититься.</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"diagramma\">\r\n        <div className=\"diagramma__left-side\">\r\n          <h3 className=\"diagramma__cell diagramma__cell_side_left\">1 неделя</h3>\r\n          <p className=\"diagramma__caption\">Back-end</p>\r\n        </div>\r\n        <div className=\"diagramma__right-side\">\r\n          <h3 className=\"diagramma__cell\">4 недели</h3>\r\n          <p className=\"diagramma__caption\">Front-end</p>\r\n        </div>\r\n      </div>\r\n\r\n    </section>\r\n  </>\r\n));\r\n\r\nexport default AboutProject;\r\n","import React from 'react';\r\nimport './Techs.css';\r\n\r\nfunction Techs() {\r\n  return (\r\n    <div className=\"techs__wrapper\">\r\n      <div className=\"techs\">\r\n        <h2 className=\"techs__title\">Технологии</h2>\r\n        <h3 className=\"techs__subtitle\">7 технологий</h3>\r\n        <p className=\"techs__text\">На курсе веб-разработки мы освоили технологии, которые применили в дипломном проекте.</p>\r\n        <ul className=\"techs__list\">\r\n          <li className=\"techs__list-item\">HTML</li>\r\n          <li className=\"techs__list-item\">CSS</li>\r\n          <li className=\"techs__list-item\">JS</li>\r\n          <li className=\"techs__list-item\">React</li>\r\n          <li className=\"techs__list-item\">Git</li>\r\n          <li className=\"techs__list-item\">Express.js</li>\r\n          <li className=\"techs__list-item\">mongoDB</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Techs;\r\n","export default __webpack_public_path__ + \"static/media/photo-me.da5a148b.jpg\";","import React from 'react';\r\nimport './AboutMe.css';\r\nimport photoMe from '../../images/photo-me.jpg';\r\n\r\nfunction AboutMe() {\r\n  return (\r\n    <div className=\"about-me\">\r\n      <h2 className=\"about-me__title\">Студентка</h2>\r\n      <div className=\"about-me__container\">\r\n        <div className=\"about-me__text-container\">\r\n          <h3 className=\"about-me__name\">Софья</h3>\r\n          <p className=\"about-me__profession\">Фронтенд-разработчик, 31 год</p>\r\n          <p className=\"about-me__text\">\r\n            Я живу в Санкт-Петербурге,\r\n            закончила факультет технологии и предпринимательства РГПУ им.Герцена.\r\n            Я люблю шить и современные технологии,\r\n            долгое время работала в портнихой,\r\n            сейчас моя работа связана со швейной и вышивальной техникой.\r\n            А ещё увлекаюсь бегом.\r\n            Недавно, благодаря учебе в Яндекс.Практикуме, начала кодить.\r\n            После окончания курса планирую работать в сфере IT.\r\n          </p>\r\n\r\n          <div className=\"about-me__social-media\">\r\n            <a href=\"https://www.instagram.com/soninson/\" className=\"about-me__link\" target=\"_blank\" rel=\"noreferrer\">Instagram</a>\r\n            <a href=\"https://github.com/sonja-p\" className=\"about-me__link\" target=\"_blank\" rel=\"noreferrer\">Github</a>\r\n          </div>\r\n        </div>\r\n        <img className=\"about-me__photo\" alt=\"Моя фотография\" src={photoMe} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AboutMe;\r\n","import React from 'react';\r\nimport './Portfolio.css';\r\n\r\nfunction Portfolio() {\r\n  return (\r\n    <div className=\"portfolio\">\r\n      <h2 className=\"portfolio__title\">Портфолио</h2>\r\n      <ul className=\"portfolio__links\">\r\n        <li className=\"portfolio__links-item\">\r\n          <p className=\"portfolio__link-title\">Статичный сайт</p>\r\n          <a href=\"/movies\" className=\"portfolio__link\" rel=\"noreferrer\">\r\n            ↗\r\n          </a>\r\n        </li>\r\n        <li className=\"portfolio__links-item\">\r\n          <p className=\"portfolio__link-title\">Адаптивный сайт</p>\r\n          <a href=\"/movies\" className=\"portfolio__link\" rel=\"noreferrer\">\r\n            ↗\r\n          </a>\r\n        </li>\r\n        <li className=\"portfolio__links-item\">\r\n          <p className=\"portfolio__link-title\">Одностраничное приложение</p>\r\n          <a href=\"https://puolukka.nomoredomains.rocks\" className=\"portfolio__link\" target=\"_blank\" rel=\"noreferrer\">\r\n            ↗\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Portfolio;\r\n","import React from 'react';\r\nimport './Footer.css';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <p className=\"footer__about-project\">Учебный проект Яндекс.Практикум х BeatFilm.</p>\r\n      <div className=\"footer__container\">\r\n        <p className=\"footer__copyright\">\r\n          &copy;\r\n          {' '}\r\n          {new Date().getFullYear()}\r\n        </p>\r\n        <ul className=\"footer__links\">\r\n          <li className=\"footer__links-item\">\r\n            <a href=\"https://practicum.yandex.ru\" className=\"footer__link\" target=\"_blank\" rel=\"noreferrer\">Яндекс.Практикум</a>\r\n          </li>\r\n          <li className=\"footer__links-item\">\r\n            <a href=\"https://github.com/sonja-p\" className=\"footer__link\" target=\"_blank\" rel=\"noreferrer\">Github</a>\r\n          </li>\r\n          <li className=\"footer__links-item\">\r\n            <a href=\"https://www.instagram.com/soninson\" className=\"footer__link\" target=\"_blank\" rel=\"noreferrer\">Instagram</a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport './Main.css';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../Header/Header';\r\nimport Promo from '../Promo/Promo';\r\nimport NavTab from '../NavTab/NavTab';\r\nimport AboutProject from '../AboutProject/AboutProject';\r\nimport Techs from '../Techs/Techs';\r\nimport AboutMe from '../AboutMe/AboutMe';\r\nimport Portfolio from '../Portfolio/Portfolio';\r\nimport Footer from '../Footer/Footer';\r\n\r\n/*\r\nPromo — компонент с вёрсткой баннера страницы «О проекте».\r\nNavTab — компонент с навигацией по странице «О проекте».\r\nAboutProject — компонент с описанием дипломного проекта.\r\nTechs — компонент с использованными технологиями.\r\nAboutMe — компонент с информацией о студенте.\r\nPortfolio — компонент со ссылками на другие проекты.\r\n*/\r\n\r\nfunction Main({ loggedIn }) {\r\n  const ref = React.createRef();\r\n\r\n  const scrollTo = () => {\r\n    ref.current.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header loggedIn={loggedIn} />\r\n      <main className=\"main\">\r\n        <Promo />\r\n        <NavTab>\r\n          <button onClick={() => scrollTo()} type=\"button\" className=\"nav-tab__link\">Узнать больше</button>\r\n        </NavTab>\r\n        <AboutProject ref={ref} />\r\n        <Techs />\r\n        <AboutMe />\r\n        <Portfolio />\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n}\r\n\r\nMain.propTypes = {\r\n  loggedIn: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default Main;\r\n","import { useCallback, useState } from 'react';\r\n\r\nexport function useForm() {\r\n  const [values, setValues] = useState({});\r\n\r\n  const handleChange = (evt) => {\r\n    const input = evt.target;\r\n    const { value } = input;\r\n    const { name } = input;\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  return { values, handleChange, setValues };\r\n}\r\n\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (evt) => {\r\n    const input = evt.target;\r\n    const { value } = input;\r\n    const { name } = input;\r\n    setValues({ ...values, [name]: value });\r\n    setErrors({ ...errors, [name]: input.validationMessage });\r\n    setIsValid(input.closest('form').checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid],\r\n  );\r\n\r\n  return {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  };\r\n}\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './SearchForm.css';\r\nimport { useFormWithValidation } from '../../hooks/useForm';\r\n\r\nfunction SearchForm({ findMovies, isLoading }) {\r\n  const {\r\n    values,\r\n    handleChange,\r\n    resetForm,\r\n  } = useFormWithValidation();\r\n\r\n  const [error, setError] = useState('');\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (!values.movie) {\r\n      setError('Нужно ввести ключевое слово');\r\n    } else {\r\n      findMovies(values.movie);\r\n      setError('');\r\n      resetForm();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <form\r\n      className=\"search-form\"\r\n      title=\"Поиск фильма\"\r\n      name=\"search-film\"\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <div className=\"search-form__container\">\r\n        <input\r\n          className=\"search-form__input\"\r\n          onChange={handleChange}\r\n          id=\"movie\"\r\n          name=\"movie\"\r\n          type=\"text\"\r\n          value={values.movie || ''}\r\n          maxLength=\"100\"\r\n          placeholder=\"Фильм\"\r\n          disabled={isLoading}\r\n        />\r\n\r\n        <span className=\"search-form__input-error\" id=\"movie-error\">{error}</span>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className={`search-form__button ${\r\n            isLoading && 'search-form__button_disabled'\r\n          }`}\r\n        >\r\n          {isLoading ? 'Поиск...' : 'Найти'}\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nSearchForm.propTypes = {\r\n  findMovies: PropTypes.func.isRequired,\r\n  isLoading: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default SearchForm;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './FilterCheckbox.css';\r\n\r\nfunction FilterCheckbox({ filtered, handleCheck }) {\r\n  function toggleCheckbox() {\r\n    handleCheck(!filtered);\r\n  }\r\n\r\n  return (\r\n    <div className=\"filter-checkbox\">\r\n      <label className=\"filter-checkbox__switch\">\r\n        <input type=\"checkbox\" onClick={toggleCheckbox} className=\"filter-checkbox__input\" />\r\n        <span className=\"filter-checkbox__slider\" />\r\n      </label>\r\n      <h3 className=\"filter-checkbox__title\">Короткометражки</h3>\r\n    </div>\r\n  );\r\n}\r\n\r\nFilterCheckbox.propTypes = {\r\n  handleCheck: PropTypes.func.isRequired,\r\n  filtered: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default FilterCheckbox;\r\n","import React from 'react';\r\nimport './Preloader.css';\r\n\r\nconst Preloader = () => (\r\n  <div className=\"preloader\">\r\n    <div className=\"preloader__container\">\r\n      <span className=\"preloader__round\" />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Preloader;\r\n","function throttle(func, delay) {\r\n  let timeout = null;\r\n  // eslint-disable-next-line func-names\r\n  return function (...args) {\r\n    if (!timeout) {\r\n      timeout = setTimeout(() => {\r\n        func.call(this, ...args);\r\n        timeout = null;\r\n      }, delay);\r\n    }\r\n  };\r\n}\r\n\r\nexport default throttle;\r\n","import React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './MoviesCardList.css';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport throttle from '../../utils/throttle';\r\n\r\n// Если карточек больше трёх, под ними появляется кнопка «Ещё».\r\n// По нажатию отрисовываются ещё три, а кнопка сдвигается ниже,\r\n// чтобы оказаться под блоком с карточками.\r\n// Ширина 1280px — 12 карточек по 3 в ряд. Кнопка «Ещё» загружает по 3 карточки.\r\n// Ширина 768px — 8 карточек по 2 в ряд. Кнопка «Ещё» загружает по 2 карточки.\r\n// Ширина от 320px до 480px — 5 карточек по 1 в ряд. Кнопка «Ещё» загружает по 2 карточки.\r\n\r\nfunction MoviesCardList({\r\n  isLoading, moviesCards, messages, children,\r\n}) {\r\n  const [cardsCount, setCardsCount] = useState(0);\r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n\r\n  useEffect(() => {\r\n    const callback = throttle(() => {\r\n      setWindowWidth(window.innerWidth);\r\n    }, 1000);\r\n\r\n    window.addEventListener('resize', callback);\r\n    return () => {\r\n      window.removeEventListener('resize', callback);\r\n    };\r\n  }, []);\r\n\r\n  const handleClick = () => {\r\n    if (windowWidth > 1020) {\r\n      setCardsCount(cardsCount + 3);\r\n    } else {\r\n      setCardsCount(cardsCount + 2);\r\n    }\r\n  };\r\n\r\n  const renderCards = () => {\r\n    if (windowWidth > 768) {\r\n      setCardsCount(12);\r\n    } else if (windowWidth > 480 && windowWidth <= 768) {\r\n      setCardsCount(8);\r\n    } else {\r\n      setCardsCount(5);\r\n    }\r\n  };\r\n\r\n  useEffect(() => renderCards(), [windowWidth]);\r\n\r\n  return (\r\n    <section className=\"movies-cardlist\">\r\n      { isLoading ? <Preloader />\r\n        : (\r\n          <>\r\n            { messages.searchForm ? (\r\n              <span className=\"movies-cardlist__message\">{messages.searchForm}</span>) : (\r\n                <>\r\n                  <ul className=\"movies-cardlist__list\">\r\n                    {children.slice(0, cardsCount)}\r\n                  </ul>\r\n                  { moviesCards.length > 3 && moviesCards.length > cardsCount && (\r\n                  <button\r\n                    className=\"movies-cardlist__button\"\r\n                    type=\"button\"\r\n                    onClick={handleClick}\r\n                  >\r\n                    Ещё\r\n                  </button>\r\n                  )}\r\n                </>\r\n            )}\r\n          </>\r\n        )}\r\n    </section>\r\n  );\r\n}\r\n\r\nMoviesCardList.propTypes = {\r\n  isLoading: PropTypes.bool.isRequired,\r\n  moviesCards: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n    auth: PropTypes.string,\r\n  }).isRequired,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  children: PropTypes.array,\r\n};\r\n\r\nMoviesCardList.defaultProps = {\r\n  children: undefined,\r\n};\r\n\r\nexport default MoviesCardList;\r\n","const reqOptions = {\r\n  baseUrl: 'https://api.movies.explorer.nomoredomains.rocks',\r\n  url: 'https://api.nomoreparties.co',\r\n  beatfilmUrl: 'https://api.nomoreparties.co/beatfilm-movies',\r\n  // baseUrl: 'http://localhost:3000',\r\n  headers: {\r\n    Accept: 'application/json',\r\n    'Content-Type': 'application/json',\r\n  },\r\n};\r\n\r\nexport default reqOptions;\r\n","import React from 'react';\r\nimport { useRouteMatch } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport './MoviesCard.css';\r\nimport reqOptions from '../../utils/constants';\r\n\r\nfunction MoviesCard(props) {\r\n  const {\r\n    id,\r\n    country,\r\n    director,\r\n    duration,\r\n    year,\r\n    description,\r\n    image,\r\n    trailerLink,\r\n    trailer,\r\n    nameRU,\r\n    nameEN,\r\n    onCardLike,\r\n    onCardDelete,\r\n    isLiked,\r\n  } = props;\r\n\r\n  const isSavedMovies = useRouteMatch({ path: '/saved-movies', exact: true });\r\n  const isMovies = useRouteMatch({ path: '/movies', exact: true });\r\n  const { url } = reqOptions;\r\n\r\n  function handleLikeClick() {\r\n    onCardLike({\r\n      id,\r\n      country,\r\n      director,\r\n      duration,\r\n      year,\r\n      description,\r\n      image,\r\n      trailerLink,\r\n      nameRU,\r\n      nameEN,\r\n    });\r\n  }\r\n\r\n  const handleCardDelete = () => {\r\n    onCardDelete(props);\r\n  };\r\n\r\n  function addMinutes(n) {\r\n    let minutes;\r\n    if (n % 10 >= 2 && n % 10 <= 4) {\r\n      minutes = 'минуты';\r\n    } else if (n % 10 === 1) {\r\n      minutes = 'минута';\r\n    } else {\r\n      minutes = 'минут';\r\n    }\r\n    return minutes;\r\n  }\r\n\r\n  return (\r\n    <li className=\"movies-card\">\r\n      <div className=\"movies-card__container\">\r\n        <h3 className=\"movies-card__title\">{nameRU}</h3>\r\n        <span className=\"movies-card__duration\">\r\n          {`${duration} ${addMinutes(duration)}`}\r\n        </span>\r\n      </div>\r\n      {isMovies ? (\r\n        <a href={trailerLink} target=\"_blank\" rel=\"noreferrer\" className=\"movies-card__link\">\r\n          <img\r\n            src={`${url}${image.url}`}\r\n            alt={`Обложка фильма \"${nameRU}\"`}\r\n            className=\"movies-card__image\"\r\n          />\r\n        </a>\r\n      ) : (\r\n        <a href={trailer} target=\"_blank\" rel=\"noreferrer\" className=\"movies-card__link\">\r\n          <img\r\n            src={`${url}${image}`}\r\n            alt={`Обложка фильма \"${nameRU}\"`}\r\n            className=\"movies-card__image\"\r\n          />\r\n        </a>\r\n      )}\r\n      {isMovies && isLiked && (\r\n        <button\r\n          className=\"movies-card__button movies-card__button_type_saved\"\r\n          type=\"button\"\r\n          aria-label=\"Save\"\r\n          onClick={onCardDelete}\r\n        />\r\n      )}\r\n      {isMovies && !isLiked && (\r\n        <button\r\n          className=\"movies-card__button\"\r\n          type=\"button\"\r\n          onClick={handleLikeClick}\r\n        >\r\n          Сохранить\r\n        </button>\r\n      )}\r\n      {isSavedMovies && (\r\n        <button\r\n          className=\"movies-card__button movies-card__button_type_delete\"\r\n          type=\"button\"\r\n          aria-label=\"Delete\"\r\n          onClick={handleCardDelete}\r\n        />\r\n      )}\r\n    </li>\r\n  );\r\n}\r\n\r\nMoviesCard.propTypes = {\r\n  id: PropTypes.number,\r\n  country: PropTypes.string,\r\n  director: PropTypes.string.isRequired,\r\n  year: PropTypes.string.isRequired,\r\n  description: PropTypes.string.isRequired,\r\n  nameRU: PropTypes.string.isRequired,\r\n  nameEN: PropTypes.string,\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  image: PropTypes.any.isRequired,\r\n  trailerLink: PropTypes.string,\r\n  trailer: PropTypes.string,\r\n  duration: PropTypes.number.isRequired,\r\n  onCardLike: PropTypes.func,\r\n  onCardDelete: PropTypes.func.isRequired,\r\n  isLiked: PropTypes.bool,\r\n};\r\n\r\nMoviesCard.defaultProps = {\r\n  id: undefined,\r\n  onCardLike: undefined,\r\n  isLiked: undefined,\r\n  trailer: undefined,\r\n  trailerLink: undefined,\r\n  country: undefined,\r\n  nameEN: undefined,\r\n};\r\n\r\nexport default MoviesCard;\r\n","import React, { useState } from 'react';\r\nimport './Movies.css';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../Header/Header';\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport FilterCheckbox from '../FilterCheckbox/FilterCheckbox';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\nimport Footer from '../Footer/Footer';\r\nimport MoviesCard from '../MoviesCard/MoviesCard';\r\n\r\nfunction Movies({\r\n  loggedIn, isLoading, findMovies, movies, messages, onCardLike, onCardDelete, likedMovies,\r\n}) {\r\n  const [filtered, setFiltered] = useState(false);\r\n  const SHORT_MOVIE_DURATION = 40;\r\n\r\n  const data = !filtered ? movies : movies.filter(\r\n    (movie) => movie.duration <= SHORT_MOVIE_DURATION,\r\n  );\r\n\r\n  return (\r\n    <div className=\"movies\">\r\n      <Header loggedIn={loggedIn} />\r\n      <SearchForm findMovies={findMovies} isLoading={isLoading} />\r\n      <FilterCheckbox\r\n        filtered={filtered}\r\n        handleCheck={(value) => setFiltered(value)}\r\n      />\r\n      <MoviesCardList\r\n        isLoading={isLoading}\r\n        moviesCards={data}\r\n        messages={messages}\r\n        onCardLike={onCardLike}\r\n      >\r\n        {\r\n          data.map((card) => (\r\n            <MoviesCard\r\n              key={card.id}\r\n              // eslint-disable-next-line react/jsx-props-no-spreading\r\n              {...card}\r\n              // onCardClick={onCardClick}\r\n              onCardLike={onCardLike}\r\n              onCardDelete={() => onCardDelete(card)}\r\n              isLiked={likedMovies.includes(card.id)}\r\n            />\r\n          ))\r\n        }\r\n      </MoviesCardList>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nMovies.propTypes = {\r\n  isLoading: PropTypes.bool.isRequired,\r\n  loggedIn: PropTypes.bool.isRequired,\r\n  findMovies: PropTypes.func.isRequired,\r\n  movies: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n    auth: PropTypes.string,\r\n  }).isRequired,\r\n  onCardLike: PropTypes.func.isRequired,\r\n  onCardDelete: PropTypes.func.isRequired,\r\n  likedMovies: PropTypes.arrayOf(PropTypes.number).isRequired,\r\n};\r\n\r\nexport default Movies;\r\n","import React, { useState } from 'react';\r\nimport './SavedMovies.css';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../Header/Header';\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport FilterCheckbox from '../FilterCheckbox/FilterCheckbox';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\nimport Footer from '../Footer/Footer';\r\nimport MoviesCard from '../MoviesCard/MoviesCard';\r\n\r\nfunction SavedMovies({\r\n  isLoading, loggedIn, findMovies, movies, messages, onCardDelete,\r\n}) {\r\n  const [filtered, setFiltered] = useState(false);\r\n  const SHORT_MOVIE_DURATION = 40;\r\n\r\n  const data = !filtered ? movies : movies.filter(\r\n    (movie) => movie.duration <= SHORT_MOVIE_DURATION,\r\n  );\r\n\r\n  return (\r\n    <div className=\"saved-movies\">\r\n      <Header loggedIn={loggedIn} />\r\n      <SearchForm\r\n        findMovies={findMovies}\r\n        isLoading={isLoading}\r\n      />\r\n      <FilterCheckbox\r\n        filtered={filtered}\r\n        handleCheck={(value) => setFiltered(value)}\r\n      />\r\n      <MoviesCardList\r\n        isLoading={isLoading}\r\n        moviesCards={data}\r\n        messages={messages}\r\n      >\r\n        {\r\n          (data.map((card) => (\r\n            <MoviesCard\r\n              key={card.movieId}\r\n              // eslint-disable-next-line react/jsx-props-no-spreading\r\n              {...card}\r\n              // onCardClick={onCardClick}\r\n              onCardDelete={onCardDelete}\r\n            />\r\n          )).reverse())\r\n        }\r\n      </MoviesCardList>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nSavedMovies.propTypes = {\r\n  isLoading: PropTypes.bool.isRequired,\r\n  loggedIn: PropTypes.bool.isRequired,\r\n  findMovies: PropTypes.func.isRequired,\r\n  movies: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n    auth: PropTypes.string,\r\n  }).isRequired,\r\n  onCardDelete: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default SavedMovies;\r\n","import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport './Register.css';\r\nimport logo from '../../images/header-logo.svg';\r\nimport { useFormWithValidation } from '../../hooks/useForm';\r\n\r\nfunction Register({ handleRegister, isSending, messages }) {\r\n  const {\r\n    values,\r\n    handleChange,\r\n    resetForm,\r\n    errors,\r\n    isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm({});\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { name, password, email } = values;\r\n    handleRegister({ name, password, email });\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <Link to=\".\" className=\"register__link\">\r\n        <img src={logo} alt=\"Логотип\" className=\"register__logo\" />\r\n      </Link>\r\n      <h2 className=\"register__title\">Добро пожаловать!</h2>\r\n      <form\r\n        className=\"register__form\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <span className=\"register__input-title\">Имя</span>\r\n        <input\r\n          className=\"register__input\"\r\n          onChange={handleChange}\r\n          id=\"name\"\r\n          name=\"name\"\r\n          type=\"text\"\r\n          pattern=\"^[А-Яа-яЁёA-Za-z]+-? ?[А-Яа-яЁёA-Za-z]+$\"\r\n          value={values.name || ''}\r\n          minLength=\"2\"\r\n          maxLength=\"20\"\r\n          required\r\n          disabled={isSending}\r\n        />\r\n        <span className=\"register__input-error\" id=\"name-error\">{errors.name}</span>\r\n\r\n        <span className=\"register__input-title\">E-mail</span>\r\n        <input\r\n          className=\"register__input\"\r\n          onChange={handleChange}\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={values.email || ''}\r\n          required\r\n          disabled={isSending}\r\n        />\r\n        <span className=\"register__input-error\" id=\"email-error\">{errors.email}</span>\r\n\r\n        <span className=\"register__input-title\">Пароль</span>\r\n        <input\r\n          className=\"register__input\"\r\n          onChange={handleChange}\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          value={values.password || ''}\r\n          autoComplete=\"on\"\r\n          required\r\n          disabled={isSending}\r\n        />\r\n        <span className=\"register__input-error\" id=\"password-error\">{errors.password}</span>\r\n\r\n        <span className=\"register__input-error\" id=\"messages\">{messages.regForm}</span>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className={`register__button\r\n            ${!isValid && 'register__button_disabled'}\r\n            ${isSending && 'register__button_disabled'}`}\r\n        >\r\n          {isSending ? 'Регистрация...' : 'Зарегистрироваться'}\r\n        </button>\r\n        <div className=\"register__signin\">\r\n          <p className=\"register__link-title\">Уже зарегистрированы?</p>\r\n          <Link to=\"signin\" className=\"register__login-link\">\r\n            Войти\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nRegister.propTypes = {\r\n  handleRegister: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool.isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default Register;\r\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './Login.css';\r\nimport { Link } from 'react-router-dom';\r\nimport logo from '../../images/header-logo.svg';\r\nimport { useFormWithValidation } from '../../hooks/useForm';\r\n\r\nfunction Login({ handleLogin, isSending, messages }) {\r\n  const {\r\n    values,\r\n    handleChange,\r\n    resetForm,\r\n    errors,\r\n    isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    resetForm({});\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!values.email || !values.password) {\r\n      return;\r\n    }\r\n    const { password, email } = values;\r\n    handleLogin({ password, email });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <Link to=\".\" className=\"login__link\">\r\n        <img src={logo} alt=\"Логотип\" className=\"login__logo\" />\r\n      </Link>\r\n      <h2 className=\"login__title\">Рады видеть!</h2>\r\n      <form\r\n        className=\"login__form\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <span className=\"login__input-title\">E-mail</span>\r\n        <input\r\n          className=\"login__input\"\r\n          onChange={handleChange}\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          value={values.email || ''}\r\n          required\r\n          disabled={isSending}\r\n        />\r\n        <span className=\"login__input-error\" id=\"email-error\">{errors.email}</span>\r\n\r\n        <span className=\"login__input-title\">Пароль</span>\r\n        <input\r\n          className=\"login__input\"\r\n          id=\"password\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          onChange={handleChange}\r\n          value={values.password || ''}\r\n          autoComplete=\"on\"\r\n          required\r\n          disabled={isSending}\r\n        />\r\n        <span className=\"login__input-error\" id=\"password-error\">{errors.password}</span>\r\n\r\n        <span className=\"login__input-error\" id=\"messages\">{messages.authForm}</span>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className={`login__button\r\n          ${!isValid && 'login__button_disabled'}\r\n          ${isSending && 'login__button_disabled'}`}\r\n        >\r\n          {isSending ? 'Вход...' : 'Войти'}\r\n        </button>\r\n        <div className=\"login__signup\">\r\n          <p className=\"login__link-title\">Ещё не зарегистрированы?</p>\r\n          <Link to=\"signup\" className=\"login__register-link\">\r\n            Регистрация\r\n          </Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nLogin.propTypes = {\r\n  handleLogin: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool.isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n    auth: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\nconst CurrentUserContext = React.createContext();\r\nexport default CurrentUserContext;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport './Profile.css';\r\nimport PropTypes from 'prop-types';\r\nimport Header from '../Header/Header';\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\nimport { useFormWithValidation } from '../../hooks/useForm';\r\n\r\nfunction Profile({\r\n  handleLogout,\r\n  loggedIn,\r\n  onUpdateUser,\r\n  isSending,\r\n  messages,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const {\r\n    values, handleChange, resetForm, errors, isValid,\r\n  } = useFormWithValidation();\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser, {}, true);\r\n    }\r\n  }, [currentUser, resetForm]);\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({ email: values.email, name: values.name });\r\n  }\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      <Header loggedIn={loggedIn} />\r\n      <h2 className=\"profile__form-title\">{`Привет, ${currentUser.name}!`}</h2>\r\n      <form\r\n        className=\"profile__form\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <div className=\"profile__input-container\">\r\n          <span className=\"profile__input-title\">Имя</span>\r\n          <input\r\n            className=\"profile__input\"\r\n            onChange={handleChange}\r\n            id=\"name\"\r\n            name=\"name\"\r\n            type=\"text\"\r\n            pattern=\"^[А-Яа-яЁёA-Za-z]+-? ?[А-Яа-яЁёA-Za-z]+$\"\r\n            value={values.name || currentUser.name}\r\n            minLength=\"2\"\r\n            maxLength=\"20\"\r\n            required\r\n          />\r\n        </div>\r\n        <span className=\"login__input-error\" id=\"email-error\">{errors.name}</span>\r\n        <div className=\"profile__input-container\">\r\n          <span className=\"profile__input-title\">E-mail</span>\r\n          <input\r\n            className=\"profile__input\"\r\n            onChange={handleChange}\r\n            id=\"email\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            value={values.email || currentUser.email}\r\n            required\r\n          />\r\n        </div>\r\n        <span className=\"login__input-error\" id=\"email-error\">{errors.email}</span>\r\n        {messages && <span className=\"login__input-error\" id=\"messages\">{messages.profileForm}</span>}\r\n        <button\r\n          type=\"submit\"\r\n          className={`profile__button\r\n          ${!isValid && 'login__button_disabled'}\r\n          ${values.email === currentUser.email && values.name === currentUser.name && 'login__button_disabled'}\r\n          ${isSending && 'login__button_disabled'}`}\r\n        >\r\n          Редактировать\r\n        </button>\r\n        <button type=\"button\" className=\"profile__button profile__button_type_exit\" onClick={handleLogout}>Выйти из аккаунта</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nProfile.propTypes = {\r\n  handleLogout: PropTypes.func.isRequired,\r\n  loggedIn: PropTypes.bool.isRequired,\r\n  onUpdateUser: PropTypes.func.isRequired,\r\n  isSending: PropTypes.bool.isRequired,\r\n  messages: PropTypes.shape({\r\n    regForm: PropTypes.string,\r\n    authForm: PropTypes.string,\r\n    profileForm: PropTypes.string,\r\n    searchForm: PropTypes.string,\r\n    auth: PropTypes.string,\r\n  }).isRequired,\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport './NotFound.css';\r\n\r\nfunction NotFound({ loggedIn }) {\r\n  const history = useHistory();\r\n\r\n  const handleClick = () => {\r\n    if (loggedIn && history.length > 2) {\r\n      history.go(-1);\r\n    } else {\r\n      history.push('/');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"not-found\">\r\n      <span className=\"not-found__error-code\">404</span>\r\n      <p className=\"not-found__error-text\">Страница не найдена</p>\r\n      <button type=\"button\" onClick={handleClick} className=\"not-found__link\">Назад</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nNotFound.propTypes = {\r\n  loggedIn: PropTypes.bool.isRequired,\r\n};\r\n\r\nexport default NotFound;\r\n","import reqOptions from './constants';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._url = options.beatfilmUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _parseResponse = (res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n  }\r\n\r\n  getMovies() {\r\n    return fetch(this._url, {\r\n      headers: this._headers,\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n}\r\n\r\nconst MoviesApi = new Api(reqOptions);\r\n\r\nexport default MoviesApi;\r\n","import reqOptions from './constants';\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._url = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _parseResponse = (res) => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error(res.status));\r\n  }\r\n\r\n  // # возвращает информацию о пользователе (email и имя)\r\n  // GET /users/me\r\n  getUserInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  getSavedMovies() {\r\n    return fetch(`${this._url}/movies`, {\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  // # обновляет информацию о пользователе (email и имя)\r\n  // PATCH /users/me\r\n  setUserInfo(name, email) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      credentials: 'include',\r\n      headers: this._headers,\r\n      body: JSON.stringify(name, email),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  saveMovie({\r\n    id,\r\n    country,\r\n    director,\r\n    duration,\r\n    year,\r\n    description,\r\n    image,\r\n    trailerLink,\r\n    nameRU,\r\n    nameEN,\r\n  }) {\r\n    return fetch(`${this._url}/movies`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        country,\r\n        director,\r\n        duration,\r\n        year,\r\n        description,\r\n        image: image.url,\r\n        trailer: trailerLink,\r\n        thumbnail: image.formats.thumbnail.url,\r\n        nameRU,\r\n        nameEN,\r\n        movieId: id,\r\n      }),\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n\r\n  deleteMovie(id) {\r\n    return fetch(`${this._url}/movies/${id}`, {\r\n      headers: this._headers,\r\n      method: 'DELETE',\r\n      credentials: 'include',\r\n    })\r\n      .then((res) => this._parseResponse(res));\r\n  }\r\n}\r\n\r\nconst MainApi = new Api(reqOptions);\r\n\r\nexport default MainApi;\r\n","import reqOptions from './constants';\r\n\r\nclass Auth {\r\n  constructor(options) {\r\n    this._url = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  _checkResponse = (response) => (response.ok\r\n    ? response.json()\r\n    : Promise.reject(new Error(response.status)));\r\n\r\n  register = (name, password, email) => fetch(`${this._url}/signup`, {\r\n    headers: this._headers,\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    body: JSON.stringify({\r\n      name: `${name}`,\r\n      password: `${password}`,\r\n      email: `${email}`,\r\n    }),\r\n  }).then((response) => this._checkResponse(response))\r\n\r\n  authorize(password, email) {\r\n    return fetch(`${this._url}/signin`, {\r\n      headers: this._headers,\r\n      method: 'POST',\r\n      credentials: 'include',\r\n      body: JSON.stringify({\r\n        password: `${password}`,\r\n        email: `${email}`,\r\n      }),\r\n    }).then((response) => this._checkResponse(response));\r\n  }\r\n\r\n  logout = () => fetch(`${this._url}/logout`, {\r\n    headers: this._headers,\r\n    credentials: 'include',\r\n  }).then((response) => this._checkResponse(response))\r\n}\r\n\r\nconst auth = new Auth(reqOptions);\r\n\r\nexport default auth;\r\n","/* eslint-disable react/jsx-props-no-spreading */\r\n/* eslint-disable react/prop-types */\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => (\r\n  <Route>\r\n    {() => (props.loggedIn ? <Component {...props} /> : <Redirect to=\"./signin\" />)}\r\n  </Route>\r\n);\r\n\r\nexport default ProtectedRoute;\r\n","/* eslint-disable no-console */\r\nimport './App.css';\r\nimport React, {\r\n  useState,\r\n  useEffect,\r\n} from 'react';\r\n\r\nimport {\r\n  Route, Switch, Redirect, useHistory, useLocation,\r\n} from 'react-router-dom';\r\nimport Main from '../Main/Main';\r\nimport Movies from '../Movies/Movies';\r\nimport SavedMovies from '../SavedMovies/SavedMovies';\r\nimport Register from '../Register/Register';\r\nimport Login from '../Login/Login';\r\nimport Profile from '../Profile/Profile';\r\nimport NotFound from '../NotFound/NotFound';\r\nimport MoviesApi from '../../utils/MoviesApi';\r\nimport MainApi from '../../utils/MainApi';\r\nimport auth from '../../utils/auth';\r\nimport CurrentUserContext from '../../contexts/CurrentUserContext';\r\nimport ProtectedRoute from '../ProtectedRoute/ProtectedRoute';\r\n\r\nfunction App() {\r\n  const [currentUser, setCurrentUser] = useState({\r\n    name: '',\r\n    email: '',\r\n  });\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [messages, setMessages] = useState({\r\n    regForm: null,\r\n    authForm: null,\r\n    profileForm: null,\r\n    searchForm: null,\r\n    auth: null,\r\n  });\r\n  const [movies, setMovies] = useState([]);\r\n  const [isFormSending, setIsFormSending] = useState(false);\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [savedMovies, setSavedMovies] = useState([]);\r\n\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const handleError = (error) => {\r\n    console.error(error);\r\n  };\r\n\r\n  const resetMessages = () => {\r\n    setMessages({\r\n      regForm: null,\r\n      authForm: null,\r\n      profileForm: null,\r\n      searchForm: null,\r\n      auth: null,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    const localMovies = JSON.parse(localStorage.getItem('movies'));\r\n    if (localMovies !== null) {\r\n      setMovies(localMovies);\r\n    }\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    MainApi\r\n      .getSavedMovies()\r\n      .then((usersMovies) => {\r\n        setSavedMovies(usersMovies);\r\n        localStorage.setItem('savedMovies', JSON.stringify(usersMovies));\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n      });\r\n  }, [loggedIn]);\r\n\r\n  useEffect(() => {\r\n    MainApi\r\n      .getUserInfo()\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        setLoggedIn(true);\r\n        history.push(location.pathname);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.message);\r\n        setLoggedIn(false);\r\n        setMessages({\r\n          regForm: null,\r\n          authForm: null,\r\n          profileForm: null,\r\n          searchForm: null,\r\n          auth: 'При авторизации произошла ошибка. Токен не передан или передан не в том формате',\r\n        });\r\n        setCurrentUser({\r\n          name: '',\r\n          email: '',\r\n        });\r\n        localStorage.removeItem('movies');\r\n        localStorage.removeItem('savedMovies');\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    resetMessages();\r\n  }, []);\r\n\r\n  // функция поиска по фильмам\r\n  const findMovies = (name) => {\r\n    setIsLoading(true);\r\n    MoviesApi\r\n      .getMovies()\r\n      .then((data) => {\r\n        const foundMovies = data.filter((c) => c.nameRU.toLowerCase().includes(name.toLowerCase()));\r\n        if (foundMovies.length === 0) {\r\n          setMessages({\r\n            regForm: null,\r\n            authForm: null,\r\n            profileForm: null,\r\n            searchForm: 'Ничего не найдено',\r\n            auth: null,\r\n          });\r\n        } else {\r\n          setMovies(foundMovies);\r\n          localStorage.setItem('movies', JSON.stringify(foundMovies));\r\n          resetMessages();\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setMessages({\r\n          regForm: null,\r\n          authForm: null,\r\n          profileForm: null,\r\n          searchForm: 'Во время запроса произошла ошибка. Возможно, проблема с соединением или сервер недоступен. Подождите немного и попробуйте ещё раз',\r\n          auth: null,\r\n        });\r\n      })\r\n      .finally(() => setIsLoading(false));\r\n  };\r\n\r\n  // функция поиска по сохраненным в localStorage фильмам\r\n  const findSavedMovies = (name) => {\r\n    const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\r\n    const foundSavedMovies = localSavedMovies.filter(\r\n      (c) => c.nameRU.toLowerCase().includes(name.toLowerCase()),\r\n    );\r\n    if (foundSavedMovies.length === 0) {\r\n      setMessages({\r\n        regForm: null,\r\n        authForm: null,\r\n        profileForm: null,\r\n        searchForm: 'Ничего не найдено',\r\n        auth: null,\r\n      });\r\n    } else {\r\n      setSavedMovies(foundSavedMovies);\r\n      resetMessages();\r\n    }\r\n  };\r\n\r\n  // функция сохранения фильма(лайка)\r\n  const handleLike = (movie) => {\r\n    // eslint-disable-next-line prefer-destructuring\r\n    const id = movie.id;\r\n    const country = movie.country || 'Неизвестно';\r\n    const director = movie.director || 'Неизвестно';\r\n    const duration = movie.duration || 'Неизвестно';\r\n    const year = movie.year || 'Неизвестно';\r\n    const description = movie.description || 'Неизвестно';\r\n    const image = movie.image || '/uploads/_.jpeg';\r\n    const trailerLink = movie.trailerLink || 'https://www.youtube.com/=';\r\n    const nameRU = movie.nameRU || 'Неизвестно';\r\n    const nameEN = movie.nameEN || 'Неизвестно';\r\n\r\n    MainApi\r\n      .saveMovie({\r\n        id,\r\n        country,\r\n        director,\r\n        duration,\r\n        year,\r\n        description,\r\n        image,\r\n        trailerLink,\r\n        nameRU,\r\n        nameEN,\r\n      })\r\n      .then((savedMovie) => {\r\n        setSavedMovies([...savedMovies, savedMovie]);\r\n        localStorage.setItem('savedMovies', JSON.stringify([savedMovie, ...savedMovies]));\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при сохранении фильма', err.message);\r\n      });\r\n  };\r\n\r\n  // функция удаления фильма\r\n  const handleDelete = (movie) => {\r\n    const movieId = movie.id || movie.movieId;\r\n    const userMovie = savedMovies.find((i) => i.movieId === movieId);\r\n    MainApi\r\n      .deleteMovie(userMovie._id)\r\n      .then(() => {\r\n        setSavedMovies((state) => state.filter((c) => c._id !== userMovie._id));\r\n        const localSavedMovies = JSON.parse(localStorage.getItem('savedMovies'));\r\n        const newSavedMovies = localSavedMovies.filter(\r\n          (c) => c._id !== userMovie._id,\r\n        );\r\n        localStorage.setItem('savedMovies', JSON.stringify(newSavedMovies));\r\n      })\r\n      .catch((err) => {\r\n        console.log('Ошибка при удалении фильма', err.message);\r\n      });\r\n  };\r\n\r\n  const handleLogin = ({ password, email }) => {\r\n    setIsFormSending(true);\r\n    auth\r\n      .authorize(password, email)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        setLoggedIn(true);\r\n        console.log('Успешный вход в аккаунт');\r\n      })\r\n      .then(() => history.push('/movies'))\r\n      .catch((err) => {\r\n        if (err) {\r\n          setMessages({\r\n            regForm: null,\r\n            authForm: 'Вы ввели неправильный логин или пароль',\r\n            profileForm: null,\r\n            searchForm: null,\r\n            auth: null,\r\n          });\r\n        }\r\n      })\r\n      .finally(() => setIsFormSending(false));\r\n  };\r\n\r\n  const handleRegister = ({ name, password, email }) => {\r\n    setIsFormSending(true);\r\n    auth\r\n      .register(name, password, email)\r\n      .then(() => {\r\n        auth\r\n          .authorize(password, email)\r\n          .then((userData) => {\r\n            setCurrentUser(userData);\r\n            setLoggedIn(true);\r\n            console.log('Регистрация прошла успешно');\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        if (err.message === '409') {\r\n          setMessages({\r\n            regForm: 'Пользователь с таким email уже существует',\r\n            authForm: null,\r\n            profileForm: null,\r\n            searchForm: null,\r\n            auth: null,\r\n          });\r\n        } else {\r\n          setMessages({\r\n            regForm: 'При регистрации пользователя произошла ошибка',\r\n            authForm: null,\r\n            profileForm: null,\r\n            searchForm: null,\r\n            auth: null,\r\n          });\r\n        }\r\n      })\r\n      .finally(() => setIsFormSending(false));\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    auth\r\n      .logout()\r\n      .then(() => {\r\n        history.push('/signin');\r\n        setLoggedIn(false);\r\n        setCurrentUser({\r\n          name: '',\r\n          email: '',\r\n        });\r\n        localStorage.removeItem('movies');\r\n        localStorage.removeItem('savedMovies');\r\n        setMovies([]);\r\n      })\r\n      .catch((err) => {\r\n        handleError(err);\r\n      });\r\n  };\r\n\r\n  const handleUpdateUser = (name, email) => {\r\n    setIsFormSending(true);\r\n    MainApi\r\n      .setUserInfo(name, email)\r\n      .then((user) => {\r\n        setCurrentUser(user);\r\n        console.log(user);\r\n        setMessages({\r\n          regForm: null,\r\n          authForm: null,\r\n          profileForm: 'Данные пользователья обновлены успешно',\r\n          searchForm: null,\r\n          auth: null,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (err.message === '409') {\r\n          setMessages({\r\n            regForm: null,\r\n            authForm: null,\r\n            profileForm: 'Пользователь с таким email уже существует',\r\n            searchForm: null,\r\n            auth: null,\r\n          });\r\n        } else {\r\n          setMessages({\r\n            regForm: null,\r\n            authForm: null,\r\n            profileForm: 'При обновлении профиля произошла ошибка',\r\n            searchForm: null,\r\n            auth: null,\r\n          });\r\n        }\r\n      })\r\n      .finally(() => setIsFormSending(false));\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/movies\"\r\n            loggedIn={loggedIn}\r\n            component={Movies}\r\n            isLoading={isLoading}\r\n            findMovies={findMovies}\r\n            movies={movies}\r\n            messages={messages}\r\n            onCardLike={handleLike}\r\n            onCardDelete={handleDelete}\r\n            likedMovies={savedMovies.map((movie) => movie.movieId)}\r\n          />\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/saved-movies\"\r\n            loggedIn={loggedIn}\r\n            component={SavedMovies}\r\n            isLoading={isLoading}\r\n            findMovies={findSavedMovies}\r\n            movies={savedMovies}\r\n            messages={messages}\r\n            onCardDelete={handleDelete}\r\n          />\r\n          <Route exact path=\"/signup\">\r\n            {loggedIn && <Redirect to=\"/\" />}\r\n            <Register\r\n              handleRegister={handleRegister}\r\n              isSending={isFormSending}\r\n              messages={messages}\r\n            />\r\n          </Route>\r\n          <Route exact path=\"/signin\">\r\n            {loggedIn && <Redirect to=\"/\" />}\r\n            <Login\r\n              handleLogin={handleLogin}\r\n              isSending={isFormSending}\r\n              messages={messages}\r\n            />\r\n          </Route>\r\n          <ProtectedRoute\r\n            exact\r\n            path=\"/profile\"\r\n            loggedIn={loggedIn}\r\n            component={Profile}\r\n            handleLogout={handleLogout}\r\n            onUpdateUser={handleUpdateUser}\r\n            isSending={isFormSending}\r\n            messages={messages}\r\n          />\r\n          <Route exact path=\"/\">\r\n            <Main loggedIn={loggedIn} />\r\n          </Route>\r\n          <Route path=\"/*\">\r\n            <NotFound loggedIn={loggedIn} />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = (onPerfEntry) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({\r\n      getCLS, getFID, getFCP, getLCP, getTTFB,\r\n    }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}